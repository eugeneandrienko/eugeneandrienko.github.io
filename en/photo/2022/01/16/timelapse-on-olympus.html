<!DOCTYPE html>
<html lang="ru">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1">

<title>Как сделать timelapse видео на Olympus E-M10 II в Linux/FreeBSD | Dragon’s notes</title>
<meta name="generator" content="Jekyll v4.4.1">
<meta property="og:title" content="Как сделать timelapse видео на Olympus E-M10 II в Linux/FreeBSD">
<meta name="author" content="Eugene Andrienko">
<meta property="og:locale" content="ru">
<meta name="description" content="Небольшая заметка о том, как взять Olympus, включить цейтраферную съёмку и собрать таймлапс-видео северного сияния с помощью пары Unix-утилит.">
<meta property="og:description" content="Небольшая заметка о том, как взять Olympus, включить цейтраферную съёмку и собрать таймлапс-видео северного сияния с помощью пары Unix-утилит.">
<link rel="canonical" href="https://eugene-andrienko.com/en/photo/2022/01/16/timelapse-on-olympus.html">
<meta property="og:url" content="https://eugene-andrienko.com/photo/2022/01/16/timelapse-on-olympus.html">
<meta property="og:site_name" content="Dragon’s notes">
<meta property="og:type" content="article">
<meta property="article:published_time" content="2022-01-16T00:00:00+03:00">
<meta name="twitter:card" content="summary">
<meta property="twitter:title" content="Как сделать timelapse видео на Olympus E-M10 II в Linux/FreeBSD">
<script type="application/ld+json">
{"@context":"https://schema.org","@type":"BlogPosting","author":{"@type":"Person","name":"Eugene Andrienko"},"dateModified":"2022-01-16T00:00:00+03:00","datePublished":"2022-01-16T00:00:00+03:00","description":"Небольшая заметка о том, как взять Olympus, включить цейтраферную съёмку и собрать таймлапс-видео северного сияния с помощью пары Unix-утилит.","headline":"Как сделать timelapse видео на Olympus E-M10 II в Linux/FreeBSD","mainEntityOfPage":{"@type":"WebPage","@id":"https://eugene-andrienko.com/photo/2022/01/16/timelapse-on-olympus.html"},"publisher":{"@type":"Organization","logo":{"@type":"ImageObject","url":"https://eugene-andrienko.com/assets/images/home.jpg"},"name":"Eugene Andrienko"},"url":"https://eugene-andrienko.com/photo/2022/01/16/timelapse-on-olympus.html"}</script>

<link rel="apple-touch-icon" sizes="180x180" href="/en/apple-touch-icon.png">
<link rel="icon" type="image/png" sizes="32x32" href="/en/favicon-32x32.png">
<link rel="icon" type="image/png" sizes="16x16" href="/en/favicon-16x16.png">
<link rel="mask-icon" href="/en/safari-pinned-tab.svg" color="#5bbad5">
<meta name="theme-color" content="#ffffff">
<link rel="me" href="https://mas.to/@evgandr">
<link rel="stylesheet" href="/assets/css/main.css">
<meta name="fediverse:creator" content="@evgandr@mas.to">
<link type="application/atom+xml" rel="alternate" href="https://eugene-andrienko.com/en/feed.xml" title="Dragon's notes">
</head>
<body>
<header class="site-header">
<div class="wrapper">
<div class="site-header-inner"><ul class="site-nav">
<li>
<a class="site-brand" rel="author" href="/en/">
Dragon's notes
</a>
</li>
<li>
<a class="page-link" href="/en/now.html">NOW</a>
</li>
<li>
<a class="page-link" href="/en/about.html">ABOUT</a>
</li>
<li>
<a class="page-link" href="/en/links.html">LINKS</a>
</li>

<li>
<a class="page-link" aria-label="RSS feed link" href="/en/feed.xml">
<span class="rss-text">RSS</span>
<svg xmlns="http://www.w3.org/2000/svg" width="18" height="18" viewbox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="3" stroke-linecap="round" stroke-linejoin="round" class="feather feather-rss"><path d="M4 11a9 9 0 0 1 9 9"></path><path d="M4 4a16 16 0 0 1 16 16"></path><circle cx="5" cy="19" r="1"></circle></svg>
</a>
</li>

<div class="lang-separator">
<hr>
</div>
<li class="nav-right"><a class="page-link active">EN</a></li>
<li class="nav-right">
<a class="page-link" href="/photo/2022/01/16/timelapse-on-olympus.html">RU</a>
</li>
</ul></div>
</div>
</header>
<main class="page-content" aria-label="Content">
<div class="wrapper">
<div class="framework main">
<div class="post">
<section>
<header class="post-header">
<h1 class="post-title p-name" itemprop="name headline">Как сделать timelapse видео на Olympus E-M10 II в Linux/FreeBSD</h1>
<p class="post-meta">
<time class="dt-published" datetime="2022-01-16T00:00:00+03:00" itemprop="datePublished"><svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewbox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-calendar"><rect x="3" y="4" width="18" height="18" rx="2" ry="2"></rect><line x1="16" y1="2" x2="16" y2="6"></line><line x1="8" y1="2" x2="8" y2="6"></line><line x1="3" y1="10" x2="21" y2="10"></line></svg>
2022.01.16
</time>
<span class="left-vsplit">
<svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewbox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-folder"><path d="M22 19a2 2 0 0 1-2 2H4a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h5l2 3h9a2 2 0 0 1 2 2z"></path></svg>
photo
</span>
</p>
<div class="post-tags"><a class="post-tag" href="/en/tags.html#freebsd">#freebsd</a></div></header>
<article class="post h-entry" itemscope itemtype="http://schema.org/BlogPosting">
<div class="post-content e-content" itemprop="articleBody">
<p>
Небольшая заметка о том, как взять Olympus, включить цейтраферную съёмку и
собрать таймлапс-видео северного сияния с помощью пары Unix-утилит.
</p>
<p>
Если хоть немного увлекаться съёмками северных сияний или астрофотографией, то
рано или поздно возникает желание записать видео со звёздным небом, где видно
либо вращение Земли, либо сполохи северного сияния. Понятное дело, что сколь
бы большой ни была SD-карта внутри фотоаппарата — места на ней всё равно не
хватит, если просто включить запись видео и не трогать штатив всю ночь.
</p>
<p>
Но выход есть! Вместо записи очередного 4K 60fps ролика можно снимать один
кадр с таким же разрешением, но, допустим, раз в 15 секунд. А потом склеить
все получившиеся фото в одно видео, которое ожидаемо будет меньше по размеру,
и при этом, даже с частотой съёмки в 0.0666(6) кадра в секунду — вращение
Земли по прежнему будет видно.
</p>
<div class="outline-2">
<h2>Настройка фотоаппарата (Olympus E-M10 II)</h2>
<div class="outline-text-2">
<p>
Интервальная съёмка в Olympus E-M10 II включается через «Меню съёмки 1»:
</p>
<div class="figure">
<p><img src="/assets/static/interval_shooting.jpg" alt="interval_shooting.jpg">
</p>
</div>
<dl class="org-dl">
<dt><b>Количество кадров</b></dt>
<dd>Выставлять по вкусу, ориентируясь на расчётную
длительность работы камеры. Меньше 30 кадров лучше не выставлять, иначе
итоговое видео будет слишком коротким и малосодержательным.</dd>
<dt><b>Ожидание</b></dt>
<dd>2 секунды, чтобы успели затухнуть колебания штатива от нажатия
на кнопку спуска.</dd>
<dt><b>Интервал</b></dt>
<dd>Выставлять в зависимости от динамичности снимаемой сцены.
Например, для съёмки северного сияния стоит выставлять его в 1-2
секунды. Чем больше интервал, тем сильнее будет остывать фотоаппарат между
спусками затвора и тем меньше будет шумов на итоговом снимке.</dd>
</dl>
<p>
Сборку видео из снимков на фотоаппарате стоит отключить — всё равно ничего
хорошего из этого не получится. Снимки надо обрабатывать, возможно захочется
использовать для видео FPS, отличный от предлагаемых инженерами Олимпуса.
</p>
</div>
</div>
<div class="outline-2">
<h2>Обработка RAW-файлов</h2>
<div class="outline-text-2">
<p>
Полученные гигабайты фотографий надо будет обработать: обрезать их под
соотношение сторон 16:9, подкрутить экспокоррекцию, HSV, настройки шумодава,
угол поворота изображения и т.п.
</p>
<p>
В RawTherapee это делается следующим образом. Сначала производятся нужные
изменения для одного файла, которые сохраняются в отдельный профиль обработки
изображения:
</p>
<div class="figure">
<p><img src="/assets/static/rawtherapee_profiles.png" alt="rawtherapee_profiles.png">
</p>
</div>
<p>
Потом выбираются все файлы и к ним применяется сохранённый профиль: ПКМ —
«Обработка операций профиля» — «Применить» — «Мои профили» — <i>имя
сохранённого профиля</i>. Обработанные файлы надо поместить в очередь на обработку
и запустить их в работу.
</p>
</div>
</div>
<div class="outline-2">
<h2>Сборка timelapse-видео</h2>
<div class="outline-text-2">
<p>
В силу исторических причин, для работы с видео я использовал mencoder —
перекодировщик от команды MPlayer'а. И лишь для одного узкого случая — для
Инстаграма — пришлось использовать ffmpeg.
</p>
<p>
Для склейки видео из обработанных jpg-файлов, в каталоге с этими файлами надо
запустить следующую команду:
</p>
<pre class="example">
mencoder mf://*.jpg -mf w=4616:h=3464:fps=10:type=jpg -ovc lavc -lavcopts
vcodec=msmpeg4v2:vbitrate=16000:keyint=15:mbd=2:trell -oac copy -o lapse.avi
</pre>
<p>
В опции <code>-mf w=4616:h=3464:fps=10:type=jpg</code> нужно указать ширину и высоту
используемых jpg-файлов. Там же можно настроить частоту кадров в итоговом
видео и тип используемых изображений, если он отличен от JPEG.
</p>
</div>
</div>
<div class="outline-2">
<h2>Подготовка видео для Instagram</h2>
<div class="outline-text-2">
<p>
Для Instagram требуется видео в формате MP4, к тому же — не в огромном
разрешении 4616x3464.
</p>
<p>
Чтобы получить из jpg-файлов таймлапс в меньшем разрешении, можно использовать
команду:
</p>
<pre class="example">
mencoder mf://*.jpg -mf w=4616:h=3464:fps=10:type=jpg -ovc lavc -lavcopts
vcodec=msmpeg4v2:vbitrate=16000:keyint=15:mbd=2:trell -oac copy -vf
scale=1154:-10 -o lapse_scaled.avi
</pre>
<p>
которая отличается от предыдущей лишь опцией <code>-vf scale=1154:-10</code>, где <code>1154</code> —
горизонтальное разрешение отмасштабированного видео. Вертикальное разрешение
будет вычислено автоматически, на основе разрешения исходных кадров.
</p>
<p>
А для перекодирования видео в MP4 для Instagram, используется следующая
команда:
</p>
<pre class="example">
ffmpeg -i lapse_scaled.avi lapse_scaled.mp4
</pre>
</div>
</div>
</div>
</article>
</section>
</div>
</div>
</div>
</main><footer class="site-footer h-card">
<div class="wrapper">
<div class="site-footer-inner">
<div>
<svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewbox="0 0 24 24" fill="none" stroke="#586e75" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-pen-tool"><path d="M12 19l7-7 3 3-7 7-3-3z"></path><path d="M18 13l-1.5-7.5L2 2l3.5 14.5L13 18l5-5z"></path><path d="M2 2l7.586 7.586"></path><circle cx="11" cy="11" r="2"></circle></svg>
<a href="/en/changelog.html">ChangeLog</a> ┆
<a href="/en/tags.html">Tags</a> ┆
<a href="/en/categories.html">Categories</a> ┆
<a href="/en/archives.html">Archives</a>
</div>
<br>

<div xmlns:cc="http://creativecommons.org/ns#">
<a rel="cc:attributionURL" href="https://eugene-andrienko.com/en/">This blog</a>
© 2020-2025 by
<a rel="cc:attributionURL dct:creator" property="cc:attributionName" href="https://eugene-andrienko.com/en/about">Eugene Andrienko</a>
is licensed under
<a href="https://creativecommons.org/licenses/by/4.0/?ref=chooser-v1" target="_blank" rel="license noopener noreferrer" style="display:inline-block;">
CC BY 4.0
</a>
<img loading="lazy" width="16" height="16" class="copyleft" src="/assets/images/icons/cc.svg" alt="CC">
<img loading="lazy" width="16" height="16" class="copyleft" src="/assets/images/icons/by.svg" alt="BY">
</div>
<div>
Powered by: <a title="Jekyll is a simple, blog-aware, static site
generator." href="https://jekyllrb.com/">Jekyll</a>.
Icons: <a href="https://github.com/feathericons/feather">Feather</a>.
Colors: <a href="https://ethanschoonover.com/solarized/">Solarized Light</a>.
</div>

<div class="old-gold-buttons">
<a href="https://eugene-andrienko.com/en/it/2024/07/07/thinkpad-x220-second-life">
<img loading="lazy" alt="IBM Thinkpad button" width="80" height="15" src="/assets/images/buttons/80x15/thinkpad.png">
</a>
<a href="https://github.com/eugeneandrienko">
<img loading="lazy" alt="Night coder button" width="80" height="15" src="/assets/images/buttons/80x15/nightcoder.png">
</a>
<img loading="lazy" alt="Love dragons button" width="80" height="15" src="/assets/images/buttons/80x15/dragon.png">
</div>
<div class="old-gold-buttons">
<a href="https://cobaltblue.neocities.org/buttons/">
<img loading="lazy" alt="Made by dragon button" width="88" height="31" src="/assets/images/buttons/88x31/dragonmade-yellow.png">
</a>
<map name="fediring6">
<area href="https://fediring.net/previous?host=eugene-andrienko.com%2Fen%2F" shape="rect" coords="3,6,12,27" target="_top" alt="previous" title="previous">
<area href="https://fediring.net/" shape="rect" coords="15,3,72,27" target="_blank" alt="Fediring" title="Fediring">
<area href="https://fediring.net/next?host=eugene-andrienko.com%2Fen%2F" shape="rect" coords="75,6,84,27" target="_top" alt="next" title="next">
</map>
<img loading="lazy" usemap="#fediring6" alt="Fediring" width="88" height="31" src="/assets/images/buttons/88x31/fediring.png">
<map name="noaimini7">
<area href="https://baccyflap.com/noai" shape="rect" coords="15,3,72,27" target="_blank" alt="no ai webring" title="no ai webring">
<area href="https://baccyflap.com/noai/?prv&s=drg" target="_top" shape="rect" coords="3,6,12,27" alt="previous" title="previous">
<area href="https://baccyflap.com/noai/?nxt&s=drg" target="_top" shape="rect" coords="75,6,84,27" alt="next" title="next">
</map>
<img loading="lazy" usemap="#noaimini7" alt="No AI ring" width="88" height="31" src="/assets/images/buttons/88x31/noaiwidget.gif">
<a href="https://512kb.club/#100">
<img loading="lazy" alt="512KB club, green team" width="88" height="31" src="/assets/images/buttons/88x31/green-team.gif">
</a>
<a href="https://no-js.club/">
<img loading="lazy" alt="no-JS Club" width="88" height="31" src="/assets/images/buttons/88x31/javascript-zero.gif">
</a>
<a href="https://www.gnu.org/software/emacs/">
<img loading="lazy" alt="Created with Emacs" width="88" height="31" src="/assets/images/buttons/88x31/emacs.gif">
</a>
</div>
</div>
</div>
</footer>
</body>
</html>
